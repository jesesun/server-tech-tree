## 银行金融系统架构特点
* 高稳定性是基础
* 准确性和安全性的高要求，引入大量专业的管理平台，方便对银行各类资源的管理和监控，减少人工出错，共性是：机构管理、用户管理、角色管理、权限管理、审批流管理
* CAP中，对一致性的要求会比可用性更高
* 高扩展性（针对toB金融科技而言，客户少，必须适应客户）：SaaS/本地化、单机构/多机构、数据库适配、多接入渠道、多接出渠道
* 渠道
    * 多样性：线上线下渠道、接入接出渠道
    * 必要性：必须依赖关联方，因为没有资质
* 数据
    * 类型：原始数据包括用户、账户、交易等，加工数据包括监管、报表等。`分级，见openbanking`
    * 传输方式：http(s)、sftp（改为对象存储、分布式文件系统、区块链）
    * 高安全：对账、加密、脱敏、全操作留痕。防薅羊毛等交易防御
    * 高准确性：基于事务的一致性，TCC模型、FMT模型、XA模型
    * 应用 
      * 精准营销：个性化推荐/营销、预算管理
      * 风险管理：贷前风险预测、贷中风险监控、贷后催收管理、反欺诈
      * 数据产品：信用分、差异定价、画像产品、智能客服
      * 其他：智能投顾、量化投资
* 风险控制
    * 原因：风险来自于信息部队称
    * 目标：既定的损失目标下的收益最大化
    * 风控用于多种金融业务。尤其贷款，贷前——贷中——贷后，包括反欺诈、审批、合规审查、风险定价、信用评分、催收等场景
    * 征信：风控的一部分，征信的重要作用之一是为授信机构的风控活动提供信息服务
>目标：`LOSS<=目标`。`LOSS=∑ PDi * EADi * LGDi`，其中PD（Probability of Default）是违约概率、EAD（Exposure at Default）是违约风险敞口、LGD（Loss Given Default）是违约损失率，这些参数由欺诈管理、还款能力、还款意愿、还款能力和意愿的稳定性、贷后管理等数据计算所得
* 安全
    * 反欺诈、数据安全、合规监控和报告、身份认证和授权、审计、加密
* 强监管：为监管要预留设计空间
    * 管理报送：一行两会上报、外管局上报、财政部上报、本地监管部门上报
    * 面向监管部门，提供投诉通道、监视能力
    * 面向被监管机构，提供自查能力
* 金融产品交易周期长，多异步处理。可能会通过轮询查接口得到结果
* 多定时任务处理
* 多文件处理
* 新技术如何和这样的架构融合在一起？
    * 另起互联网核心
* 新技术接受度
    * 去IOE：IBM服务器被x86国产服务器代替，EMC存储被国内华为等高端存储替代，Oracle数据库被开源MySQL等数据库替代
    * 由于业务领域高要求，金融领域在新技术接受度最谨慎最慢，尤其银行it系统，代表现阶段最成熟技术。但同时看到，区块链等新技术在金融领域落地，得益于新一代金融科技公司的崛起，推动金融领域的技术更新慢慢走上快车道

## 不同企业的金融科技服务
### 金融领域IT技术服务提供商/技术外包商：壁垒较低
 * 工作范围
    * 系统集成：本质上就是各种其他国内、国外的产品给客户搭搭乐高。营收涨的快，但是毛利不高。财报好看。这里面的巨无霸就是神州数码。
    * 软件开发：针对客户的需求，一个个敲代码或者开发平台搭出客户要的东西。这个是劳动力的活苦活累活。东软、中软的地盘。
    * 代理实施：拿着老外的产品，Resell&实施，或者在套一层自己的皮上去。汉得属于这一种。 
* 山东省城商行合作联盟有限公司（传统银行组建的信科企业）：区域性银行共享服务中心实践（2015）
    * 有非常完整的银行业务功能，向上能够对接线上（手机银行等）、线下（柜面等）、第三方（人行系统等）全渠道，向下能够对接多家金融机构。与银行传统系统在架构上差别不大，对接成本相对低
    * 技术上，对开源技术和新技术标准较保守（成本）
        * 去IOE不彻底
        * 虚拟化技术，没有容器
        * 兼容jsp，大量的xml
        * 几乎不使用新开源技术，也不对开源技术做定制化修改

![银行核心应用架构图](https://upload-images.jianshu.io/upload_images/2119886-b22f9494da7e2182.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

* 文思海辉（IT技术服务提供商/技术外包商）：如何重塑数字化银行的核心（2015）
    * 技术紧随市场，拥抱开源技术，但限于成本和场景限制，使用的都是非常成熟的开源技术，几乎不使用新技术，也不对开源技术做定制化修改。好处是成本小，隐患是无技术壁垒、难以快速响应场景或业务的变化（新技术面向的都是可期的未来场景或业务），导致可替代性高
    * 银行核心系统的关键技术栈：服务化（研发效率）、分布式（可用性）、异步（性能）、缓存（性能）、流控（可用性）、集群（可用性）、虚拟化（资源使用效率）、海量数据处理（基于RMDB处理结构化数据，数据）、大数据处理（基于NoSQL处理非结构化数据，数据）

* 恒生电子（IT技术服务提供商）：区块链技术催生互联网金融下一代技术（2016）

* TalkingData（数据服务商）：移动大数据技术在互联网金融获客及经营中的应用（2015）
  ![一种数据统计系统架构](https://upload-images.jianshu.io/upload_images/2119886-71f6dca81830b589.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
    * 数据统计系统设计思想：定义了两个概念，一个是维度（一个维度是一个任意若干个字段组合），一个是度量（包括各种类SQL的计算类型：count、sum、group by等）。这样的设计十分友好，无需技术人员，产品团队就可以用来做数据统计（见图中绿色部分），他们只需配置各种数据维度并指定合适的度量计算，就能得到常用的数据统计结果（比如uv、pv等）
    * 数据营销系统（获客）设计思想：基于标签的预测，根据个人信息、交易行为、出行、购物等历史数据，为每个用户打标签，以标签集合作为特征向量训练出一套标签关联度模型，用以预测用户未来在符合某些标签时的行为
